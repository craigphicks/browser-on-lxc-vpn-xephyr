shared:
  logdir: ./log
  sshArgs:
    prog: ssh
    args:
      - '-o'
      - UserKnownHostsFile=/dev/null
      - '-o'
      - StrictHostKeyChecking=no
  sshfsMountArgs:
    prog: sshfs
    args:
      - '-o'
      - UserKnownHostsFile=/dev/null
      - '-o'
      - StrictHostKeyChecking=no
      - '-o'
      - idmap=user
      - '-o'
      - reconnect
  sshfsUnmountArgs:
    prog: fusermount
    args:
      - '-u'
  xephyrArgs:
    prog: Xephyr
    args:
      - '-ac'
      - '-screen'
      - 1920x1200
      - '-br'
      - '-reset'
      - '-zap'
      - ':2'
default:
  sshKeyFilename: /home/craig/.ssh/to-default
  openVPN:
    enable: false
    vpnClientCertFilename: /home/craig/client-default.ovpn
  lxcImageSrc: 'ubuntu:18.04'
  contUsername: ubuntu
  lxcImageAlias: ub18-im
  lxcCopyProfileName: default
  lxcContBridgeName: lxdbr0
  phoneHome:
    autoLXCBridge: true
    ufwRule:
      enable: true
    port: 3000
  postInitScript:
    cmdOpts:
      ssh: ssh
      addSshArgs: []
      afterDestination: ''
      remoteCmd: []
      stdin:
        isFilename: false
        text: ''
      stdout: inherit
      stderr: inherit
    spawnCmdParams:
      prog: null
      args: []
      stdin:
        filename: ''
        text: ''
      opts:
        detached: false
        noErrorOnCmdNonZeroReturn: false
        assignToEnv: {}
  serveScripts:
    default:
      cmdOpts:
        ssh: ssh
        addSshArgs: []
        afterDestination: ''
        remoteCmd: []
        stdin:
          isFilename: false
          text: ''
        stdout: inherit
        stderr: inherit
      spawnCmdParams:
        prog: null
        args: []
        stdin:
          filename: ''
          text: ''
        opts:
          detached: false
          noErrorOnCmdNonZeroReturn: false
          assignToEnv: {}
  cloudInit:
    timezone: America/Los_Angeles
    locale: en_US.UTF-8
    packages: []
    runcmd: []
  sshfsMountRoot: /home/craig/mnt
  rsyncBackups:
    - contDir: null
      hostDir: null
  gits:
    default:
      repo: null
      contDir: null
firefox:
  sshKeyFilename: /home/craig/.ssh/to-firefox
  openVPN:
    enable: false
    vpnClientCertFilename: /home/craig/client-firefox.ovpn
  lxcImageSrc: 'ubuntu:18.04'
  contUsername: ubuntu
  lxcImageAlias: ub18-im
  lxcCopyProfileName: default
  lxcContBridgeName: lxdbr0
  phoneHome:
    autoLXCBridge: true
    ufwRule:
      enable: true
    port: 3010
  postInitScript:
    cmdOpts:
      ssh: ssh
      addSshArgs: []
      afterDestination: ''
      remoteCmd: []
      stdin:
        isFilename: false
        text: |
          export PATH="$HOME/.local/bin:$PATH"
          sudo apt-get -qq -y install firefox pulseaudio
      stdout: inherit
      stderr: inherit
    spawnCmdParams:
      prog: ssh
      args:
        - '-F'
        - /home/craig/.ssh/config-lxc
        - firefox
      stdin:
        filename: null
        text: |
          export PATH="$HOME/.local/bin:$PATH"
          sudo apt-get -qq -y install firefox pulseaudio
      opts:
        detached: false
        noErrorOnCmdNonZeroReturn: false
  serveScripts:
    default:
      cmdOpts:
        ssh: ssh
        addSshArgs:
          - '-Y'
          - '-R'
          - '44713:localhost:4713'
        afterDestination: ''
        remoteCmd: []
        stdin:
          isFilename: false
          text: |
            export PATH="$HOME/.local/bin:$PATH"
            PULSE_SERVER=tcp:localhost:44713 firefox
        stdout: inherit
        stderr: inherit
      spawnCmdParams:
        prog: ssh
        args:
          - '-F'
          - /home/craig/.ssh/config-lxc
          - '-X'
          - '-R'
          - '44713:localhost:4713'
          - firefox
        stdin:
          filename: null
          text: |
            export PATH="$HOME/.local/bin:$PATH"
            PULSE_SERVER=tcp:localhost:44713 firefox
        opts:
          detached: true
          noErrorOnCmdNonZeroReturn: false
  cloudInit:
    timezone: America/Los_Angeles
    locale: en_US.UTF-8
    packages: []
    runcmd: []
  sshfsMountRoot: /home/craig/mnt
  rsyncBackups:
    - contDir: null
      hostDir: null
  gits:
    default:
      repo: null
      contDir: null
ff-ncb:
  sshKeyFilename: /home/craig/.ssh/to-ff-ncb
  openVPN:
    enable: false
    vpnClientCertFilename: /home/craig/client-ff-ncb.ovpn
  lxcImageSrc: 'ubuntu:18.04'
  contUsername: ubuntu
  lxcImageAlias: ub18-im
  lxcCopyProfileName: default
  lxcContBridgeName: lxdbr0
  phoneHome:
    autoLXCBridge: true
    ufwRule:
      enable: true
    port: 3015
  postInitScript:
    cmdOpts:
      ssh: ssh
      addSshArgs: []
      afterDestination: ''
      remoteCmd: []
      stdin:
        isFilename: false
        text: ''
      stdout: inherit
      stderr: inherit
    spawnCmdParams:
      prog: ssh
      args:
        - '-F'
        - /home/craig/.ssh/config-lxc
        - ff-ncb
      stdin:
        filename: null
        text: |
          export PATH="$HOME/.local/bin:$PATH"
          sudo apt-get -qq -y install   firefox pulseaudio dbus-x11 xserver-xephyr openbox || exit 10
      opts:
        detached: false
        noErrorOnCmdNonZeroReturn: false
  serveScripts:
    default:
      spawnCmdParams:
        prog: ssh
        args:
          - '-F'
          - /home/craig/.ssh/config-lxc
          - '-X'
          - '-R'
          - '44713:localhost:4713'
          - ff-ncb
        stdin:
          filename: null
          text: |

            #export PATH="$HOME/.local/bin:$PATH"
            DISPLAY=:10 PULSE_SERVER=tcp:localhost:44713 firefox || exit 150
        opts:
          detached: true
          noErrorOnCmdNonZeroReturn: false
          assignToEnv:
            DISPLAY: ':2'
    wm:
      spawnCmdParams:
        prog: ssh
        args:
          - '-F'
          - /home/craig/.ssh/config-lxc
          - '-X'
          - '-R'
          - '44713:localhost:4713'
          - ff-ncb
        stdin:
          filename: null
          text: |
            DISPLAY=:10 PULSE_SERVER=tcp:localhost:44713 openbox-session || exit 100
        opts:
          detached: true
          noErrorOnCmdNonZeroReturn: false
          assignToEnv:
            DISPLAY: ':2'
  cloudInit:
    timezone: America/Los_Angeles
    locale: en_US.UTF-8
    packages: []
    runcmd: []
  sshfsMountRoot: /home/craig/mnt
  rsyncBackups:
    - contDir: null
      hostDir: null
  gits:
    default:
      repo: null
      contDir: null
sagemath-v9:
  sshKeyFilename: /home/craig/.ssh/to-sagemath-v9
  openVPN:
    enable: false
    vpnClientCertFilename: /home/craig/client-sagemath-v9.ovpn
  lxcImageSrc: 'ubuntu:18.04'
  contUsername: ubuntu
  lxcImageAlias: ub18-im
  lxcCopyProfileName: default
  lxcContBridgeName: lxdbr0
  phoneHome:
    autoLXCBridge: true
    ufwRule:
      enable: true
    port: 3025
  postInitScript:
    cmdOpts:
      ssh: ssh
      addSshArgs: []
      afterDestination: ''
      remoteCmd: []
      stdin:
        isFilename: false
        text: |
          export PATH="$HOME/.local/bin:$PATH"
          sudo apt-get -qq -y install firefox pulseaudio || exit 10
          mkdir sagedir
          cd sagedir
          wget files.sagemath.org/linux/64bit/sage-9.0-Ubuntu_18.04-x86_64.tar.bz2 || exit 20
          tar -xvzf sage-9.0-Ubuntu_18.04-x86_64.tar.bz2 || exit 30
      stdout: inherit
      stderr: inherit
    spawnCmdParams:
      prog: ssh
      args:
        - '-F'
        - /home/craig/.ssh/config-lxc
        - sagemath-v9
      stdin:
        filename: null
        text: |
          export PATH="$HOME/.local/bin:$PATH"
          sudo apt-get -qq -y install firefox pulseaudio || exit 10
          mkdir sagedir
          cd sagedir
          wget files.sagemath.org/linux/64bit/sage-9.0-Ubuntu_18.04-x86_64.tar.bz2 || exit 20
          tar -xvzf sage-9.0-Ubuntu_18.04-x86_64.tar.bz2 || exit 30
      opts:
        detached: false
        noErrorOnCmdNonZeroReturn: false
  serveScripts:
    default:
      cmdOpts:
        ssh: ssh
        addSshArgs:
          - '-Y'
          - '-R'
          - '44713:localhost:4713'
        afterDestination: ''
        remoteCmd: []
        stdin:
          isFilename: false
          text: |
            export PATH="$HOME/.local/bin:$PATH"
            cd sagedir
            PULSE_SERVER=tcp:localhost:44713 BROWSER=firefox sage -n jupyter
        stdout: inherit
        stderr: inherit
      spawnCmdParams:
        prog: ssh
        args:
          - '-F'
          - /home/craig/.ssh/config-lxc
          - '-X'
          - '-R'
          - '44713:localhost:4713'
          - sagemath-v9
        stdin:
          filename: null
          text: |
            export PATH="$HOME/.local/bin:$PATH"
            cd sagedir
            PULSE_SERVER=tcp:localhost:44713 BROWSER=firefox sage -n jupyter
        opts:
          detached: true
          noErrorOnCmdNonZeroReturn: false
  cloudInit:
    timezone: America/Los_Angeles
    locale: en_US.UTF-8
    packages: []
    runcmd: []
  sshfsMountRoot: /home/craig/mnt
  rsyncBackups:
    - contDir: null
      hostDir: null
  gits:
    default:
      repo: null
      contDir: null
anac-tf:
  sshKeyFilename: /home/craig/.ssh/to-anac-tf
  openVPN:
    enable: false
    vpnClientCertFilename: /home/craig/client-anac-tf.ovpn
  lxcImageSrc: 'ubuntu:18.04'
  contUsername: ubuntu
  lxcImageAlias: ub18-im
  lxcCopyProfileName: default
  lxcContBridgeName: lxdbr0
  phoneHome:
    autoLXCBridge: true
    ufwRule:
      enable: true
    port: 3040
  postInitScript:
    cmdOpts:
      ssh: ssh
      addSshArgs: []
      afterDestination: ''
      remoteCmd: []
      stdin:
        isFilename: false
        text: |
          export PATH="$HOME/.local/bin:$PATH"
          sudo apt-get -qq -y install firefox pulseaudio || exit 10
          [[ -f Anaconda3-2020.02-Linux-x86_64.sh ]] ||   wget https://repo.anaconda.com/archive/Anaconda3-2020.02-Linux-x86_64.sh || exit 20
          bash Anaconda3-2020.02-Linux-x86_64.sh -b || exit 30
          export PATH="/home/ubuntu/anaconda3/bin:$PATH"
          conda init || exit 40
          source .bashrc || exit 50
          conda upgrade -y -q anaconda || exit 60
          pip install --upgrade tensorflow || exit 70
          exit 0
      stdout: inherit
      stderr: inherit
    spawnCmdParams:
      prog: ssh
      args:
        - '-F'
        - /home/craig/.ssh/config-lxc
        - anac-tf
      stdin:
        filename: null
        text: |
          export PATH="$HOME/.local/bin:$PATH"
          sudo apt-get -qq -y install firefox pulseaudio || exit 10
          [[ -f Anaconda3-2020.02-Linux-x86_64.sh ]] ||   wget https://repo.anaconda.com/archive/Anaconda3-2020.02-Linux-x86_64.sh || exit 20
          bash Anaconda3-2020.02-Linux-x86_64.sh -b || exit 30
          export PATH="/home/ubuntu/anaconda3/bin:$PATH"
          conda init || exit 40
          source .bashrc || exit 50
          conda upgrade -y -q anaconda || exit 60
          pip install --upgrade tensorflow || exit 70
          exit 0
      opts:
        detached: false
        noErrorOnCmdNonZeroReturn: false
  serveScripts:
    default:
      cmdOpts:
        ssh: ssh
        addSshArgs:
          - '-Y'
          - '-R'
          - '44713:localhost:4713'
        afterDestination: ''
        remoteCmd: []
        stdin:
          isFilename: false
          text: |
            export PATH="/home/ubuntu/anaconda3/bin:$PATH"
            source .bashrc || exit 110
            jupyter notebook stop 8888 2>&1 >/dev/null 
            jupyter notebook stop 8889 2>&1 >/dev/null 
            PULSE_SERVER=tcp:localhost:44713 BROWSER=firefox jupyter notebook || exit 120
        stdout: inherit
        stderr: inherit
      spawnCmdParams:
        prog: ssh
        args:
          - '-F'
          - /home/craig/.ssh/config-lxc
          - '-X'
          - '-R'
          - '44713:localhost:4713'
          - anac-tf
        stdin:
          filename: null
          text: |
            export PATH="/home/ubuntu/anaconda3/bin:$PATH"
            source .bashrc || exit 110
            jupyter notebook stop 8888 2>&1 >/dev/null 
            jupyter notebook stop 8889 2>&1 >/dev/null 
            PULSE_SERVER=tcp:localhost:44713 BROWSER=firefox jupyter notebook || exit 120
        opts:
          detached: true
          noErrorOnCmdNonZeroReturn: false
  cloudInit:
    timezone: America/Los_Angeles
    locale: en_US.UTF-8
    packages: []
    runcmd: []
  sshfsMountRoot: /home/craig/mnt
  rsyncBackups:
    - contDir: work/
      hostDir: ~/lxc-backup/anac-tf/work/
  gits:
    default:
      repo: 'git@github.com:craigphicks/lxcserv_anac-tf_work.git'
      contDir: work
